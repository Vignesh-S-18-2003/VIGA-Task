{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\vignesh\\\\Desktop\\\\Pep\\\\VIGA Task\\\\VIGA-Task\\\\client\\\\src\\\\components\\\\Main.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from \"react\";\nimport { fetchBookDetails, addReview, editReview, deleteReview } from \"../api\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction BookReviews({\n  bookId\n}) {\n  _s();\n  const [book, setBook] = useState(null);\n  const [reviewDetails, setReviewDetails] = useState({\n    rating: 1,\n    comment: \"\"\n  });\n  const [editingReview, setEditingReview] = useState(null);\n  const username = localStorage.getItem(\"username\");\n  useEffect(() => {\n    loadBook();\n  }, []);\n  const loadBook = async () => {\n    const {\n      data\n    } = await fetchBookDetails(bookId);\n    setBook(data);\n  };\n  const handleAddOrEditReview = async () => {\n    try {\n      if (editingReview) {\n        await editReview(bookId, editingReview._id, reviewDetails);\n        alert(\"Review updated successfully!\");\n      } else {\n        await addReview(bookId, {\n          ...reviewDetails,\n          username\n        });\n        alert(\"Review added successfully!\");\n      }\n      setEditingReview(null);\n      setReviewDetails({\n        rating: 1,\n        comment: \"\"\n      });\n      loadBook();\n    } catch (err) {\n      alert(\"Error saving review\");\n    }\n  };\n  const handleDeleteReview = async reviewId => {\n    try {\n      await deleteReview(bookId, reviewId);\n      alert(\"Review deleted successfully!\");\n      loadBook();\n    } catch (err) {\n      alert(\"Error deleting review\");\n    }\n  };\n  return book ? /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n      children: book.title\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 51,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n      children: [\"Average Rating: \", book.averageRating.toFixed(1) || \"No ratings yet\"]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 52,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"h4\", {\n      children: \"Reviews\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 54,\n      columnNumber: 7\n    }, this), book.reviews.map(review => /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(\"p\", {\n        children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n          children: review.username\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 58,\n          columnNumber: 13\n        }, this), \": \", review.comment, \" (\", review.rating, \"/5)\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 57,\n        columnNumber: 11\n      }, this), review.username === username && /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: () => setEditingReview(review),\n          children: \"Edit\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 62,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: () => handleDeleteReview(review._id),\n          children: \"Delete\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 63,\n          columnNumber: 15\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 61,\n        columnNumber: 13\n      }, this)]\n    }, review._id, true, {\n      fileName: _jsxFileName,\n      lineNumber: 56,\n      columnNumber: 9\n    }, this)), /*#__PURE__*/_jsxDEV(\"h4\", {\n      children: editingReview ? \"Edit Review\" : \"Add Review\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 69,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n      type: \"number\",\n      min: \"1\",\n      max: \"5\",\n      value: reviewDetails.rating,\n      onChange: e => setReviewDetails({\n        ...reviewDetails,\n        rating: parseInt(e.target.value)\n      })\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 70,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"textarea\", {\n      placeholder: \"Write your review\",\n      value: reviewDetails.comment,\n      onChange: e => setReviewDetails({\n        ...reviewDetails,\n        comment: e.target.value\n      })\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 79,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n      onClick: handleAddOrEditReview,\n      children: editingReview ? \"Update\" : \"Submit\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 84,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 50,\n    columnNumber: 5\n  }, this) : /*#__PURE__*/_jsxDEV(\"p\", {\n    children: \"Loading...\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 89,\n    columnNumber: 5\n  }, this);\n}\n_s(BookReviews, \"/XZMdDg7fImpOCJR+6erVsEQLEs=\");\n_c = BookReviews;\nexport default BookReviews;\nvar _c;\n$RefreshReg$(_c, \"BookReviews\");","map":{"version":3,"names":["React","useState","useEffect","fetchBookDetails","addReview","editReview","deleteReview","jsxDEV","_jsxDEV","BookReviews","bookId","_s","book","setBook","reviewDetails","setReviewDetails","rating","comment","editingReview","setEditingReview","username","localStorage","getItem","loadBook","data","handleAddOrEditReview","_id","alert","err","handleDeleteReview","reviewId","children","title","fileName","_jsxFileName","lineNumber","columnNumber","averageRating","toFixed","reviews","map","review","onClick","type","min","max","value","onChange","e","parseInt","target","placeholder","_c","$RefreshReg$"],"sources":["C:/Users/vignesh/Desktop/Pep/VIGA Task/VIGA-Task/client/src/components/Main.js"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\r\nimport { fetchBookDetails, addReview, editReview, deleteReview } from \"../api\";\r\n\r\nfunction BookReviews({ bookId }) {\r\n  const [book, setBook] = useState(null);\r\n  const [reviewDetails, setReviewDetails] = useState({\r\n    rating: 1,\r\n    comment: \"\",\r\n  });\r\n  const [editingReview, setEditingReview] = useState(null);\r\n  const username = localStorage.getItem(\"username\");\r\n\r\n  useEffect(() => {\r\n    loadBook();\r\n  }, []);\r\n\r\n  const loadBook = async () => {\r\n    const { data } = await fetchBookDetails(bookId);\r\n    setBook(data);\r\n  };\r\n\r\n  const handleAddOrEditReview = async () => {\r\n    try {\r\n      if (editingReview) {\r\n        await editReview(bookId, editingReview._id, reviewDetails);\r\n        alert(\"Review updated successfully!\");\r\n      } else {\r\n        await addReview(bookId, { ...reviewDetails, username });\r\n        alert(\"Review added successfully!\");\r\n      }\r\n      setEditingReview(null);\r\n      setReviewDetails({ rating: 1, comment: \"\" });\r\n      loadBook();\r\n    } catch (err) {\r\n      alert(\"Error saving review\");\r\n    }\r\n  };\r\n\r\n  const handleDeleteReview = async (reviewId) => {\r\n    try {\r\n      await deleteReview(bookId, reviewId);\r\n      alert(\"Review deleted successfully!\");\r\n      loadBook();\r\n    } catch (err) {\r\n      alert(\"Error deleting review\");\r\n    }\r\n  };\r\n\r\n  return book ? (\r\n    <div>\r\n      <h3>{book.title}</h3>\r\n      <p>Average Rating: {book.averageRating.toFixed(1) || \"No ratings yet\"}</p>\r\n\r\n      <h4>Reviews</h4>\r\n      {book.reviews.map((review) => (\r\n        <div key={review._id}>\r\n          <p>\r\n            <strong>{review.username}</strong>: {review.comment} ({review.rating}/5)\r\n          </p>\r\n          {review.username === username && (\r\n            <div>\r\n              <button onClick={() => setEditingReview(review)}>Edit</button>\r\n              <button onClick={() => handleDeleteReview(review._id)}>Delete</button>\r\n            </div>\r\n          )}\r\n        </div>\r\n      ))}\r\n\r\n      <h4>{editingReview ? \"Edit Review\" : \"Add Review\"}</h4>\r\n      <input\r\n        type=\"number\"\r\n        min=\"1\"\r\n        max=\"5\"\r\n        value={reviewDetails.rating}\r\n        onChange={(e) =>\r\n          setReviewDetails({ ...reviewDetails, rating: parseInt(e.target.value) })\r\n        }\r\n      />\r\n      <textarea\r\n        placeholder=\"Write your review\"\r\n        value={reviewDetails.comment}\r\n        onChange={(e) => setReviewDetails({ ...reviewDetails, comment: e.target.value })}\r\n      />\r\n      <button onClick={handleAddOrEditReview}>\r\n        {editingReview ? \"Update\" : \"Submit\"}\r\n      </button>\r\n    </div>\r\n  ) : (\r\n    <p>Loading...</p>\r\n  );\r\n}\r\n\r\nexport default BookReviews;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}